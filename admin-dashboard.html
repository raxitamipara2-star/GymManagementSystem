<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
<style>
body{font-family:Poppins}
</style>

  <style>
    body { font-family: Arial; margin:0; background:#f2f4f8; }
    header { background:#111827; color:white; padding:15px; text-align:center; }
    nav { background:#1f2933; padding:10px; text-align:center; }
    nav a { color:white; margin:0 15px; text-decoration:none; font-weight:bold; }
    .container { padding:20px; }
    .card { background:white; padding:20px; margin-bottom:20px; border-radius:8px; }
    input, textarea { width:100%; padding:10px; margin:10px 0; }
    button { padding:10px; background:#111827; color:white; border:none; }
  </style>
</head>
<body>

<header>
  <h1>Admin Dashboard</h1>
</header>

<nav>
  <a href="members.html">Members</a>
  <a href="bills.html">Bills</a>
  <a href="notifications.html">Notifications</a>
  <a href="supplements.html">Supplements</a>
  <a href="diet-plans.html">Diet Plans</a>
  <a href="reports.html">Reports</a>
</nav>

<div class="container">

  <div class="card">
    <h3>Add Member</h3>
    <input id="name" placeholder="Member Name">
    <input id="email" placeholder="Email">
    <button onclick="addMember()">Add Member</button>
  </div>

  <div class="card">
    <h3>Send Notification</h3>
    <textarea id="note" placeholder="Message"></textarea>
    <button onclick="sendNotification()">Send</button>
  </div>

</div>

<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore-compat.js"></script>

<script>
  firebase.auth().onAuthStateChanged(user=>{
  if(!user){
    window.location="admin-login.html";
  } else {
    firebase.firestore().collection("users").doc(user.uid).get().then(doc=>{
      if(!doc.exists || doc.data().role !== "admin"){
        alert("Access Denied");
        window.location="index.html";
      }
    });
  }
});

const firebaseConfig = {
  apiKey: "AIzaSyCux0iKyvFaZ7c8Gc8Tihcl_tULz4vh0Ok",
  authDomain: "gym-management-system-5829d.firebaseapp.com",
  projectId: "gym-management-system-5829d"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

function addMember(){
  db.collection("members").add({
    name: name.value,
    email: email.value,
    created: new Date()
  });
  alert("Member added");
}

function sendNotification(){
  db.collection("notifications").add({
    message: note.value,
    date: new Date()
  });
  alert("Notification sent");
}
</script>

</body>
</html>
